function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function wordCount(e){var t=e.match(/\S+/g);return t?t.length:0}function isPspGutenbergActive(){return document.body.classList.contains("block-editor-page")}function arraysEqual(e,t){if(void 0===e||void 0===t)return!1;if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!=t.length)return!1;e=e.sort(),t=t.sort();for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function pspContainsPT(e){if(jQuery("#psp_seo_meta\\[preferred_term\\]").val()>0){var t=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text();return!(e&&jQuery.inArray(t,e)>-1)&&(alert("Make sure that you change the preferred term before saving as you have deselected "+t),jQuery("#psp_seo_meta\\[preferred_term\\]").val(""),!0)}}function pspSelectedTerms(e,t){var r=[],s=jQuery("#psp_terms_json_str").val();s=s.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/""/g,'"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f");var i,a=JSON.parse(s);return jQuery.each(a,function(s,a){s===t&&(i=0,jQuery.each(a,function(t,s){jQuery.inArray(parseInt(s.id),e)>-1&&(r[i]=s.name.trim(),i++)}))}),r.sort(),r}function pspSelectedTermsClassic(e){var t=[];return jQuery('input[name="'+e+'"]:checked').each(function(){t.push(jQuery(this).parent("label").text().trim().replace(/\"/g,""))}),t.sort(),t}function isTermSelected(){var e=jQuery("#psp_seo_meta\\[preferred_tax\\]"),t=jQuery("#psp_seo_meta\\[preferred_term\\]"),r=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text(),s=jQuery("#psp_seo_meta\\[preferred_term\\]").val();if(s){var i,a="categories",n="post_category[]",l="category",o=t.attr("oldValue"),p=!1;isPspGutenbergActive()&&(p=!0),e&&e.val()&&"category"!==(l=jQuery("#psp_seo_meta\\[preferred_tax\\] option:selected").text())&&(a=l,n="tax_input["+l+"][]"),p&&wp.data&&wp.data.select?(taxarray=wp.data.select("core/editor").getEditedPostAttribute(a),i=pspSelectedTerms(taxarray,l)):i=pspSelectedTermsClassic(n),s&&(i.length>0?jQuery.inArray(r.trim(),i)>-1||""===s||(alert("Select this Term "+r+" if you want to set it as preferred term"),t.val(o)):(alert("Select this Term "+r+" if you want to set it as preferred term"),t.val("")))}}function pspPopulateTerms(){preferredTaxElem=jQuery("#psp_seo_meta\\[preferred_tax\\]"),preferredTermElem=jQuery("#psp_seo_meta\\[preferred_term\\]");var e=preferredTaxElem.val();jQuery("#psp_seo_meta\\[preferred_term\\]").html("");var t=jQuery("#psp_terms_json_str").val();t=t.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/""/g,'"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f");var r=JSON.parse(t);preferredTermElem.append('<option value="">Select a Term</option>'),jQuery.each(r,function(t,r){t===e&&jQuery.each(r,function(e,t){preferredTermElem.append('<option value="'+t.id+'">'+t.name+"</option>")})})}function boldWords(e){var t=e,r=jQuery("#psp_seo_meta\\[keywords\\]").val().match(/\S+/g);if(r)for(i=0;i<r.length;i++)t=(t=t.replace(new RegExp("(^|[\\W])("+escapeRegExp(r[i])+")([\\W]|$)","gi"),"$1<b>$2</b>$3")).replace(new RegExp("(^|[\\W])("+escapeRegExp(r[i])+")([\\W]|$)","gi"),"$1<b>$2</b>$3");return t}function boldText(e){var t=e,r=jQuery("#psp_seo_meta\\[keywords\\]").val().match(/\S+/g);if(r)for(i=0;i<r.length;i++)t=t.replace(new RegExp("("+escapeRegExp(r[i])+")","gi"),"<b>$1</b>");return t}function htmlEncode(e){return jQuery("<div/>").text(e).html()}function setGtbUrlPreview(e){var t="";(t=e)&&(t=t.replace(/^https?\:\/\//i,""));var r=htmlEncode(t),s=(r=r.replace(/\/$/,"")).length;jQuery("#permalinkSizer").html(r);var i=r=r.replace(/([^https?:\/\/])(\/)/g,"$1 > ");t=r,jQuery("#urlSizer").html(r),jQuery("#murlSizer").html(i);var a=new RegExp("W(.*)$");for(trimmed=!1;jQuery("#urlSizer").width()>566;){var n=r;n=(n=(n=(n=n.substring(0,n.length-1)).trim()).replace(/\>$/,"")).trim(),jQuery("#urlSizer").html(n),r=n,trimmed=!0}trimmed&&(r+=" ...",jQuery("#urlSizer").html(r)),info=s+" characters,  ",jQuery("#urlInfo").html(r.length+" characters, "+jQuery("#urlSizer").width()+" pixels"),jQuery("#urlSizer").width()<=584?jQuery("#urlInfo").html(info+'<span style="color:green;">'+jQuery("#urlSizer").width()+"/584 pixels</span>"):jQuery("#urlInfo").html(info+'<span style="color:red;">'+jQuery("#urlSizer").width()+"/584 pixels</span>"),jQuery("#techblissonlineSnippetUrl").html(r),mtrimmed=!1;for(var l=i;i.length>42;)i=jQuery.trim(i.replace(" ...","")),(l=(l=(l=jQuery.trim(l.replace(a,""))).trim()).replace(/\>$/,"")).length>=42&&(l=(l=jQuery.trim(i.replace(" ...",""))).substring(0,l.length-1)),l=l.trim(),i=l+=" ...",mtrimmed=!0;mtrimmed&&jQuery("#murlSizer").html(i),info=i.length+" characters,  ",jQuery("#murlInfo").html(i.length+" characters, "+jQuery("#murlSizer").width()+" pixels"),jQuery("#murlSizer").width()<=282?jQuery("#murlInfo").html(info+'<span style="color:green;">'+jQuery("#urlSizer").width()+" pixels</span>"):jQuery("#murlInfo").html(info+'<span style="color:red;">'+jQuery("#murlSizer").width()+" pixels</span>"),jQuery("#techblissonlineMSnippetUrl").html(i)}function setUrlPreview(){var e=jQuery.trim(jQuery("#pspHomePermalink").text())+"slug-name/";if(isPspGutenbergActive()&&!0,jQuery("#editable-post-name").length){e=jQuery.trim(jQuery("#sample-permalink").text());var t=jQuery.trim(jQuery("#editable-post-name").text());e=(e=e.replace(t,"")).replace(/\/$/g,"")}else jQuery("#name").length?e=jQuery.trim(jQuery("#pspPostPermalink").text()):jQuery("#slug").length&&(e=jQuery.trim(jQuery("#pspPostPermalink").text()));if(jQuery("#new-post-slug").length>0)e+=jQuery("#new-post-slug").val();else if(jQuery("#editable-post-name-full").length){e+=jQuery("#editable-post-name-full").text()}e&&(e=e.replace(/^https?\:\/\//i,""));var r=htmlEncode(e),s=r.length;s=(r=r.replace(/\/$/,"")).length;jQuery("#permalinkSizer").html(r);var i=r=r.replace(/([^https?:\/\/])(\/)/g,"$1 > ");e=r,jQuery("#urlSizer").html(r),jQuery("#murlSizer").html(i);var a=new RegExp("W(.*)$");for(trimmed=!1;jQuery("#urlSizer").width()>584;){var n=r;n=(n=(n=(n=n.substring(0,n.length-1)).trim()).replace(/\>$/,"")).trim(),jQuery("#urlSizer").html(n),r=n,trimmed=!0}trimmed&&(r+=" ..."),info=s+" characters,  ",jQuery("#urlInfo").html(s+" characters, "+jQuery("#urlSizer").width()+" pixels"),jQuery("#urlSizer").width()<=584?jQuery("#urlInfo").html(info+'<span style="color:green;">'+jQuery("#urlSizer").width()+"/584 pixels</span>"):jQuery("#urlInfo").html(info+'<span style="color:red;">'+jQuery("#urlSizer").width()+"/584 pixels</span>"),jQuery("#techblissonlineSnippetUrl").html(r),mtrimmed=!1;for(var l=i;l.length>42;)i=jQuery.trim(i.replace(" ...","")),(l=(l=(l=jQuery.trim(l.replace(a,""))).trim()).replace(/\>$/,"")).length>=42&&(l=(l=jQuery.trim(i.replace(" ...",""))).substring(0,l.length-1)),l=l.trim(),i=l+=" ...",mtrimmed=!0;mtrimmed&&jQuery("#murlSizer").html(i),info=i.length+" characters,  ",jQuery("#murlInfo").html(i.length+" characters, "+jQuery("#murlSizer").width()+" pixels"),jQuery("#murlSizer").width()<=282?jQuery("#murlInfo").html(info+'<span style="color:green;">'+jQuery("#urlSizer").width()+" pixels</span>"):jQuery("#murlInfo").html(info+'<span style="color:red;">'+jQuery("#murlSizer").width()+" pixels</span>"),jQuery("#techblissonlineMSnippetUrl").html(i)}function stripTrailingSlash(e){return"/"==e.substr(-1)?e.substr(0,e.length-1):e}function setGtbTitlePreview(e,t){var r=jQuery("#psp_seo_meta\\[titleformat\\]").val(),s=!1,i=!1;jQuery("#psp_seo_meta\\[disable_title_format\\]:checked").length>0&&(s=!0),jQuery("#psp_seo_meta\\[disable_psp\\]:checked").length>0&&(i=!0),s&&(r="%seo_title%"),i&&(r="%wp_title%");var a=jQuery("#pspPostTypeArrayFormat").text(),n=JSON.parse(a),l=jQuery("#psp_seo_meta\\[title\\]"),o=r.replaceAll("%seo_title%",e);if(""===e&&(o=o.replaceAll("%seo_title%",l.attr("placeholder"))),o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=(o=o.replaceAll("%wp_title%",n.wp_title)).replaceAll("%site_name%",n.site_name)).replaceAll("%site_description%",n.site_description)).replaceAll("%currentyear%",n.currentyear)).replaceAll("%woo_single_cat%",n.woo_single_cat)).replaceAll("%woo_single_tag%",n.woo_single_tag)).replaceAll("%woo_single_price%",n.woo_single_price)).replaceAll("%woo_single_price_exc_tax%",n.woo_single_price_exc_tax)).replaceAll("%woo_sku%",n.woo_sku)).replaceAll("%category%",t)).replaceAll("%taxonomy%",t)).replace(/%sep%/g,n.sep),""!==(o=(o=jQuery.trim(o)).trim(n.sep))){var p=htmlEncode(o),c=p;jQuery("#titleSizer").html(p),jQuery("#actualTitleSizer").html(p);var u=new RegExp("sw+(.*)$");trimmed=!1;for(var d=p;jQuery("#titleSizer").width()>584;)p=jQuery.trim(p.replace(" ...","")),(d=jQuery.trim(d.replace(u,""))).length>=p.length&&(d=d.substring(0,d.length-1)),p=d+" ...",jQuery("#titleSizer").html(p),trimmed=!0;trimmed,jQuery("#titleSizer").html(p),mtrimmed=!1;for(var h=c;h.length>78;)c=jQuery.trim(c.replace(" ...","")),(h=jQuery.trim(h.replace(u,""))).length>=78&&(h=(h=jQuery.trim(h.replace(" ...",""))).substring(0,h.length-1)),c=h+=" ...",mtrimmed=!0;mtrimmed,jQuery("#mtitleSizer").html(c),info=jQuery("<textarea />").html(p).text().length+" characters, "+wordCount(p)+" words ",jQuery("#titleInfo").html(p.length+" characters, "+jQuery("#titleSizer").width()+" pixels, "+wordCount(p)+" words"),jQuery("#titleSizer").width()<=584?jQuery("#titleInfo").html(info+'<span style="color:green;">'+jQuery("#titleSizer").width()+"/584 pixels</span>"):jQuery("#titleInfo").html(info+'<span style="color:red;">'+jQuery("#titleSizer").width()+"/584 pixels</span>"),minfo=jQuery("<textarea />").html(c).text().length+" characters/ 78 characters "+wordCount(c)+" words ",jQuery("#mtitleInfo").html(c.length+" characters, "+jQuery("#mtitleSizer").width()+" pixels, "+wordCount(c)+" words"),c.length<=78?jQuery("#mtitleInfo").html('<span style="color:green;">'+minfo+"</span> "+jQuery("#mtitleSizer").width()+" pixels"):jQuery("#mtitleInfo").html('<span style="color:red;">'+minfo+"</span> "+jQuery("#mtitleSizer").width()+" pixels"),jQuery("#techblissonlineSnippetTitle").html(p),jQuery("#techblissonlineMSnippetTitle").html(c),setPSPSeoAnalysis()}}function setTitlePreview(){var e,t,r="",s="",i="",a=!1,n="",l=[];isPspGutenbergActive()&&(a=!0);var o=jQuery("#pspPostTypeArrayFormat").text(),p=JSON.parse(o),c=jQuery("#psp_seo_meta\\[titleformat\\]").val(),u=!1,d=!1,h=!1;jQuery("#psp_seo_meta\\[disable_title_format\\]:checked").length>0&&(u=!0),jQuery("#psp_seo_meta\\[disable_title\\]:checked").length>0&&(d=!0),jQuery("#psp_seo_meta\\[disable_psp\\]:checked").length>0&&(h=!0);n=p.category,c.toLowerCase().indexOf("%wp_title%");var m=jQuery("#title"),y=jQuery("#psp_seo_meta\\[title\\]");s=y.attr("placeholder");var g=jQuery("#psp_seo_meta\\[preferred_tax\\]"),j=jQuery("#psp_seo_meta\\[preferred_term\\]"),Q="categories",f="post_category[]",_="category";if(g&&g.val()&&"category"!==(_=jQuery("#psp_seo_meta\\[preferred_tax\\] option:selected").text())&&(Q=_,f="tax_input["+_+"][]"),!a&&m&&(pspContainsPT(l=pspSelectedTermsClassic(f)),n=j&&j.val()?jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text():l&&l.length>0?l[0]:"%"+_+"%"),!y.val()||d||h?(jQuery("#title").val()?s=jQuery.trim(jQuery("#title").val()):jQuery("#name").val()?s=jQuery.trim(jQuery("#name").val()):a&&wp.data&&wp.data.select&&(n=p.category,j&&j.val()&&(n=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text()),""===(s=wp.data.select("core/editor").getEditedPostAttribute("title"))&&(s=y.attr("placeholder")),n||(n="%"+_+"%"),void 0===(t=wp.data.select("core/editor").getEditedPostAttribute(Q))&&(n="%"+_+"%"),void 0!==t&&0===t.length&&(n="%"+_+"%",pspContainsPT(t)),void 0!==t&&t.length>0&&(pspContainsPT(l=pspSelectedTerms(t,_)),j&&j.val()?n=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text():l.length>0&&(n=l[0]))),r=s,(u||h)&&(c="%wp_title%"),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=c.replace("%seo_title%",s)).replaceAll("%wp_title%",s)).replaceAll("%site_name%",p.site_name)).replaceAll("%site_description%",p.site_description)).replaceAll("%currentyear%",p.currentyear)).replaceAll("%woo_single_cat%",p.woo_single_cat)).replaceAll("%woo_single_tag%",p.woo_single_tag)).replaceAll("%woo_single_price%",p.woo_single_price)).replaceAll("%woo_single_price_exc_tax%",p.woo_single_price_exc_tax)).replaceAll("%woo_sku%",p.woo_sku)).replace("%taxonomy%",n)).replace("%category%",n)).replace(/%sep%/g,p.sep),r=(r=jQuery.trim(r)).trim(p.sep)):(r=y.val(),i=y.val(),jQuery("#title").val()?s=jQuery.trim(jQuery("#title").val()):jQuery("#name").val()?s=jQuery.trim(jQuery("#name").val()):a&&wp.data&&wp.data.select&&(n=p.category,j&&j.val()&&(n=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text()),s=wp.data.select("core/editor").getEditedPostAttribute("title"),n||(n="%"+_+"%"),void 0===(e=wp.data.select("core/editor").getEditedPostAttribute(Q))&&(n="%"+_+"%"),void 0!==e&&0===e.length&&(n="%"+_+"%",pspContainsPT(l)),void 0!==e&&e.length>0&&(pspContainsPT(l=pspSelectedTerms(e,_)),j&&j.val()?n=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text():l.length>0&&(n=l[0]))),u&&(c="%seo_title%"),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=(r=c.replaceAll("%seo_title%",i)).replaceAll("%wp_title%",s)).replaceAll("%site_name%",p.site_name)).replaceAll("%site_description%",p.site_description)).replaceAll("%currentyear%",p.currentyear)).replaceAll("%woo_single_cat%",p.woo_single_cat)).replaceAll("%woo_single_tag%",p.woo_single_tag)).replaceAll("%woo_single_price%",p.woo_single_price)).replaceAll("%woo_single_price_exc_tax%",p.woo_single_price_exc_tax)).replaceAll("%woo_sku%",p.woo_sku)).replaceAll("%taxonomy%",n)).replaceAll("%category%",n)).replaceAll(/%sep%/g,p.sep),r=(r=jQuery.trim(r)).trim(p.sep)),""!==r){""===s||a||s;var v=htmlEncode(r),w=v;jQuery("#titleSizer").html(v),jQuery("#actualTitleSizer").html(v);var S=new RegExp("sw+(.*)$"),x=v;for(trimmed=!1;jQuery("#titleSizer").width()>584;)v=jQuery.trim(v.replace(" ...","")),(x=jQuery.trim(x.replace(S,""))).length>=v.length&&(x=x.substring(0,x.length-1)),v=x+" ...",jQuery("#titleSizer").text(v),trimmed=!0;trimmed,jQuery("#titleSizer").text(v),jQuery("body").append(jQuery("#titleSizer")).width(),jQuery("body#titleSizer").remove(),info=jQuery("<textarea />").html(v).text().length+" characters, "+wordCount(v)+" words ",jQuery("#titleInfo").html(v.length+" characters, "+jQuery("#titleSizer").width()+" pixels, "+wordCount(v)+" words"),jQuery("#titleSizer").width()<=584?jQuery("#titleInfo").html(info+'<span style="color:green;">'+jQuery("#titleSizer").width()+"/584 pixels</span>"):jQuery("#titleInfo").html(info+'<span style="color:red;">'+jQuery("#titleSizer").width()+"/584 pixels</span>"),jQuery("#techblissonlineSnippetTitle").html(v);var b=w;for(mtrimmed=!1;b.length>78;)w=jQuery.trim(w.replace(" ...","")),(b=jQuery.trim(b.replace(S,""))).length>=78&&(b=(b=jQuery.trim(b.replace(" ...",""))).substring(0,b.length-1)),w=b+=" ...",mtrimmed=!0;mtrimmed,jQuery("#mtitleSizer").text(w),jQuery("body").append(jQuery("#mtitleSizer")).width(),jQuery("body#mtitleSizer").remove(),minfo=jQuery("<textarea />").html(w).text().length+" characters/ 78 characters "+wordCount(w)+" words ",jQuery("#mtitleInfo").html(w.length+" characters, "+jQuery("#mtitleSizer").width()+" pixels, "+wordCount(w)+" words"),w.length<=78?jQuery("#mtitleInfo").html('<span style="color:green;">'+minfo+"</span> "+jQuery("#mtitleSizer").width()+" pixels"):jQuery("#mtitleInfo").html('<span style="color:red;">'+minfo+"</span> "+jQuery("#mtitleSizer").width()+" pixels"),jQuery("#techblissonlineMSnippetTitle").html(w),setPSPSeoAnalysis()}}function setDescriptionPreview(){var e,t=!1,r=jQuery("#psp_seo_meta\\[description\\]");isPspGutenbergActive()&&(t=!0);var s=jQuery.trim(jQuery("#psp_seo_meta\\[maxsnippet\\]").val()),i=s;parseInt(s)<0&&(s=230,i=285),jQuery.inArray(parseInt(s),[-1,0,1,2,3,4])>-1&&(s=230,i=285),""===s&&(s=230,i=285),s=parseInt(s),i=parseInt(i);var a="",n=!1,l=!1,o=jQuery("#pspPostTypeArrayFormat").text();if(e=JSON.parse(o).autogendesc,jQuery("#psp_seo_meta\\[disable_psp\\]:checked").length>0&&(n=!0),jQuery("#psp_seo_meta\\[disable_description\\]:checked").length>0&&(l=!0),""!==a||n||l||(a=jQuery.trim(jQuery("#psp_seo_meta\\[description\\]").val())),""===a){if(""===a&&t&&wp.data&&wp.data.select){var p=wp.data.select("core/editor").getEditedPostContent();return""!==e&&(a=(a=p.replace(/(<([^>]+)>)/gi,"")).substring(0,i)),a||(a=r.attr("placeholder")),void setGTBDescPreview(a)}var c=jQuery.trim(jQuery("#content").val());if(!r.val()||n||l)return""!==e&&(a=(a=c.replace(/(<([^>]+)>)/gi,"")).substring(0,i)),a||(a=r.attr("placeholder")),void setGTBDescPreview(a)}return a?void setGTBDescPreview(a):void 0}function setGTBDescPreview(e){jQuery("#psp_seo_meta\\[description\\]");var t=e;placeholder_desc=e;var r=jQuery.trim(jQuery("#psp_seo_meta\\[maxsnippet\\]").val()),s=r;parseInt(r)<0&&(r=230,s=285),jQuery.inArray(parseInt(r),[-1,0,1,2,3,4])>-1&&(r=230,s=285),""===r&&(r=230,s=285),r=parseInt(r),s=parseInt(s);var i=htmlEncode(t),a=i+=" ...";jQuery("#descriptionSizer").html(i),jQuery("#mdescriptionSizer").html(a);for(var n=new RegExp("sw+(.*)$"),l=i;l.length>r;)i=jQuery.trim(i.replace(" ...","")),l=jQuery.trim(l.replace(n,"")),t=jQuery.trim(t.replace(n,"")),l.length>=r&&(l=(l=jQuery.trim(l.replace(" ...",""))).substring(0,l.length-1),t=t.substring(0,t.length-1)),l+=" ...";i=l,jQuery("#descriptionSizer").html(i);for(var o=a;o.length>s;)a=jQuery.trim(a.replace(" ...","")),(o=jQuery.trim(o.replace(n,""))).length>=s&&(o=(o=jQuery.trim(o.replace(" ...",""))).substring(0,o.length-1)),o+=" ...";a=o,jQuery("#descriptionSizer").html(a),jQuery("body").append(jQuery("#descriptionSizer")).width(),jQuery("body").append(jQuery("#mdescriptionSizer")).width(),jQuery("body").remove("#descriptionSizer"),jQuery("body").remove("#mdescriptionSizer"),jQuery("#descriptionInfo").html(i.length+" characters, "+jQuery("#descriptionSizer").width()+" pixels, "+wordCount(i)+" words"),info=jQuery("#descriptionSizer").width()+" pixels, "+wordCount(i)+" words ",jQuery("#mdescriptionInfo").html(a.length+" characters, "+jQuery("#mdescriptionSizer").width()+" pixels, "+wordCount(a)+" words"),minfo=jQuery("#mdescriptionSizer").width()+" pixels, "+wordCount(a)+" words ",i.length<=146?jQuery("#descriptionInfo").html(info+'<span style="color:green;">'+i.length+"/~170 characters"):i.length<=160?jQuery("#descriptionInfo").html(info+'<span style="color:orange;">'+i.length+"/~170 characters</span>"):i.length<=166?jQuery("#descriptionInfo").html(info+'<span style="color:purple;">'+i.length+"/~170 characters</span>"):jQuery("#descriptionInfo").html(info+'<span style="color:red;">'+i.length+"/~170 characters</span>"),a.length<=146?jQuery("#mdescriptionInfo").html(minfo+'<span style="color:green;">'+a.length+"/~170 characters"):a.length<=160?jQuery("#mdescriptionInfo").html(minfo+'<span style="color:orange;">'+a.length+"/~170 characters</span>"):a.length<=166?jQuery("#mdescriptionInfo").html(minfo+'<span style="color:purple;">'+a.length+"/~170 characters</span>"):jQuery("#mdescriptionInfo").html(minfo+'<span style="color:red;">'+a.length+"/~170 characters</span>"),jQuery("#techblissonlineSnippetDescription").html(i),jQuery("#techblissonlineMSnippetDescription").html(a)}function pspSubscribe(){var e=!1;if(isPspGutenbergActive()&&(e=!0),e){var t,r=jQuery("#psp_seo_meta\\[title\\]"),s=jQuery("#psp_seo_meta\\[preferred_tax\\]"),i=jQuery("#psp_seo_meta\\[preferred_term\\]"),a=!1,n=!1,l="",o="",p=[],c=[],u="category",d="categories",h=!0,m=!0,y=jQuery.trim(jQuery("#pspHomePermalink").text())+"slug-name/",g="",j=!1,Q="",f=[];wp.data.subscribe(function(){if(l=r.val(),g=wp.data.select("core/editor").getPermalink(),permalink_change=!0,y===g&&(permalink_change=!1),y=g,g&&permalink_change)setGtbUrlPreview(g);else if(jQuery("#psp_seo_meta\\[disable_title\\]:checked").length>0&&(a=!0),jQuery("#psp_seo_meta\\[disable_psp\\]:checked").length>0&&(n=!0),s&&s.val()?(u=jQuery("#psp_seo_meta\\[preferred_tax\\] option:selected").text(),d="category"!==u?u:"categories"):d="categories",c=wp.data.select("core/editor").getEditedPostAttribute(d),arraysEqual(p,c)&&(h=!1),!l||a||n||h){if(!l||a||n){if(o=wp.data.select("core/editor").getEditedPostAttribute("title"),t===o&&(m=!1),!m&&!h)return m=!0,void(h=!0);t=o,m=!0}h=!0,p=c,Q="%"+u+"%",j||void 0===c||0!==c.length||(j=pspContainsPT(c)),void 0!==c&&c.length>0&&(f=pspSelectedTerms(c,u),j=pspContainsPT(f),i&&i.val()?Q=jQuery("#psp_seo_meta\\[preferred_term\\] option:selected").text():f.length>0&&(Q=f[0])),(!l||a||n)&&(void 0===o&&(r=jQuery("#psp_seo_meta\\[title\\]"),o=r.attr("placeholder")),""===o&&(r=jQuery("#psp_seo_meta\\[title\\]"),o=r.attr("placeholder")),o&&Q&&setGtbTitlePreview(o,Q)),!l||a||n||Q&&setGtbTitlePreview(l,Q)}else h=!0})}}function updateDateText(){var e=htmlEncode(jQuery.trim(jQuery("#DateText").val()));e.length>0?jQuery("#resultDateText").html(e+" - "):jQuery("#resultDateText").html("")}function setPSPSeoAnalysis(){var e,t=!1,r="",s="";isPspGutenbergActive()&&(t=!0),t&&wp.data&&wp.data.select?(""==(s=wp.data.select("core/editor").getEditedPostContent())&&(s=wp.data.select("core/editor").getEditedPostAttribute("content")),r=wp.data.select("core/editor").getEditedPostAttribute("title")):(s=jQuery.trim(jQuery("#content").val()),r=jQuery.trim(jQuery("#title").val()));var i=[],a=0;e=s,""!=s&&(i=(s=(s=(s=(s=s.replace(/(<([^>]+)>)/gi,"")).replace(/['"]+/g,"")).replace(/[^a-zA-Z]+/g," ")).toLowerCase()).split(/[\/\s]+/),a=i.length);var n,l=window.location.hostname,o=!1,p=!1;n=jQuery("<div />",{html:e}).find("a").map(function(){if(jQuery(this).attr("href")&&(-1==jQuery(this).attr("href").indexOf(l)&&(o=!0),-1!==jQuery(this).attr("href").indexOf(l)&&(p=!0)),""!==jQuery(this).text())return jQuery(this).text()}).get();var c;c=jQuery("<div />",{html:e}).find("img").map(function(){if(jQuery(this).attr("alt")&&""!==jQuery(this).attr("alt"))return jQuery(this).attr("alt")}).get();var u=!1,d=jQuery("<div />",{html:e}).find("img");void 0!==d&&d.length>0&&(u=!0);var h=!1,m=jQuery("<div />",{html:e}).find("h2, h3, h4, h5, h6");void 0!==m&&m.length>0&&(h=!0);var y;y=jQuery("<div />",{html:e}).find("h1").map(function(){if(""!==jQuery(this).text())return jQuery(this).text()}).get();var g;g=jQuery("<div />",{html:e}).find("h2").map(function(){if(""!==jQuery(this).text())return jQuery(this).text()}).get();var j=jQuery("#urlSizer").html(),Q=jQuery("#techblissonlineSnippetTitle").html(),f=jQuery("#techblissonlineSnippetDescription").val(),_=jQuery("#psp_seo_meta\\[description\\]").val(),v=jQuery("#psp_seo_meta\\[schema_string\\]").val(),w=!1,S=!1;""!==_&&(S=!0),""!==v&&"Invalid JSON Schema"!==v&&(w=!0);var x=jQuery.trim(jQuery("#permalinkSizer").html()),b=jQuery.trim(jQuery("#actualTitleSizer").html());jQuery("#actualTitleSizers").html(b);var T=0,P=0,z=0;""!==x&&(T=x.length),""!==x&&jQuery("#permalinkSizer").width(),""!==b&&(P=jQuery("<textarea />").html(b).text().length),""!==b&&(z=jQuery("#actualTitleSizer").width()),0==z&&(z=jQuery("#actualTitleSizers").width()-1),""!==j&&(j=j.trim());var k=0,A=0,E=0,I=0,C="",U=[0,2,4],O=[1,3,4],D=[],R=jQuery("#psp_seo_meta\\[keywords\\]").val();if(void 0!==R&&(D=R.split(",")),C+='<div class="psp-bs">',C+='<div class="container-fluid">',C+="<h1>Platinum SEO Analysis</h1>",C+='<p>This is a basic content analysis of this page and your focus keywords. Assigning a score does not mean anything and so we do not do that. Rather, make sure that all these basic recommendations are adhered to. We also recommend you to try our <a href="https://techblissonline.com/tools/" target="_blank">Techblissonline SEO Tools</a> for a detailed analysis of your pages and your competitor pages for your focus keywords, co-occuring words (related entities) and improve your content accordingly.  </p>',C+='<div class="panel-group">',C+='<div class="row"><div class="col-sm-12">',C+='<div class="panel panel-primary">',C+='<div class="panel-heading">General</div>',C+='<div class="panel-body">',C+="<ul>",T>0&&T<75?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  URL Length is '+T+" characters </li>":T>75&&(C=C+'<li><span class="psp-info dashicons dashicons-info"></span>  URL lLength is '+T+' characters <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="URL might get truncated in Google SERPS if it is more than 75 characters wide. "><sup><span class="dashicons dashicons-info"></span></sup></a></li>'),P>0&&P<70?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  SEO Title lLength is '+P+" characters </li>":P>70&&(C=C+'<li><span class="dashicons dashicons-dismiss"></span>  Actual SEO Title lLength is '+P+' characters. <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Title might get truncated in Google SERPS if it is more than 70 characters wide. "><sup><span class="dashicons dashicons-info"></span></sup></a></li>'),z>0&&z<574?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  SEO Title pixel width is '+z+" pixels </li>":z>574&&(C=C+'<li><span class="dashicons dashicons-dismiss"></span>  SEO Title pixel width is '+z+' pixels including Title format. <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Title might get truncated in Google SERPS if it is more than 574 pixels wide. "><sup><span class="dashicons dashicons-info"></span></sup></a></li>'),C+=S?'<li><span class="dashicons dashicons-yes-alt"></span>  Platinum SEO Description is used   </li>':'<li><span class="dashicons dashicons-dismiss"></span>  Platinum SEO Description field is not filled in. You may have an auto-generated description.  <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Using optimized description improves CTR from search and social engines"><sup><span class="dashicons dashicons-info"></span></sup></a></li>',C+=w?'<li><span class="dashicons dashicons-yes-alt"></span>  Json Schema is used on this page using Platinum SEO   </li>':'<li><span class="dashicons dashicons-dismiss"></span>  Json Schema is not used on this page using Platinum SEO  <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Using Json Schema has a positive impact on Google. Use our Schema generator tool to generate and add one in the Advanced SEO section."><sup><span class="dashicons dashicons-info"></span></sup></a></li>',""!=s&&(C=a>0&&a>500?C+'<li><span class="dashicons dashicons-yes-alt"></span>  Total number of words in Content is '+a+' <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Content length does not matter as long as user intent is matched for the topic covered. Write related  articles and link them internally "><sup><span class="dashicons dashicons-info"></span></sup></a></li>':C+'<li><span class="psp-info dashicons dashicons-info"></span>  Total number of words in Content is '+a+' <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Content length does not matter as long as user intent is matched for the topic covered. Write related  articles and link them internally "><sup><span class="dashicons dashicons-info"></span></sup></a></li>',C+=u?'<li><span class="dashicons dashicons-yes-alt"></span>  Images used in Content  </li>':'<li><span class="dashicons dashicons-dismiss"></span>  Images not used in Content  <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Using relevant high quality images can increase user engagement and bring in more traffic"><sup><span class="dashicons dashicons-info"></span></sup></a></li>',C+=p?'<li><span class="dashicons dashicons-yes-alt"></span>  Internal links used in content.  </li>':'<li><span class="dashicons dashicons-dismiss"></span>  Internal links not used in Content  <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Linking to other relevant internal resources improves Time on site. "><sup><span class="dashicons dashicons-info"></span></sup></a></li>',C+=o?'<li><span class="dashicons dashicons-yes-alt"></span>  External links found in content. Referring to an authoritative source on which the underlying research for the content was done or linking to the creator of the product the page is about, is always a good practice that improves trust. </li>':'<li><span class="psp-info dashicons dashicons-info"></span>  External links not found in Content.Referring to an authoritative source on which the underlying research for the content was done or linking to the creator of the product this page is about, is always a good practice that improves trust.   <a href="#" class="psptip" data-toggle="tooltip" data-placement="top" title="Linking to other relevant external resources as references improves trust on content. "><sup><span class="dashicons dashicons-info"></span></sup></a></li>',h&&(C+='<li><span class="dashicons dashicons-yes-alt"></span>  Subheaders like h2 are used in Content  </li>')),C+="</ul>",C+="</div>",C+="</div>",C+="</div></div>",(void 0!==D||D.length<1)&&""==R)return C+="</div>",C+="</div></div>",void jQuery("#techblissonlineseoanalysis").html(C);jQuery.each(D,function(e,t){if(k=0,A=0,E=0,I=0,searchlc=t.toLowerCase().trim(),!(""==searchlc||e>4)){if(jQuery.each([y,g,c,n],function(e,t){jQuery.each(t,function(t,r){-1!==r.toLowerCase().trim().indexOf(searchlc)&&(0==e&&(k+=1),1==e&&(A+=1),2==e&&(E+=1),3==e&&(I+=1))})}),jQuery.inArray(parseInt(e),U)>-1&&(C+='<div class="row">'),C+='<div class="col-sm-6">',C=(C+='<div class="panel panel-primary">')+'<div class="panel-heading">'+t+"</div>",C+='<div class="panel-body">',C+="<ul>",j&&(searchlcurl=searchlc.replace(/ /g,"-"),-1!==j.search(searchlcurl)?C+='<li><span class="dashicons dashicons-yes-alt"></span>  Used in URL  </li>':C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in URL  </li>'),Q&&(psplctitle=Q.toLowerCase().trim(),-1!==psplctitle.search(searchlc)?(C+='<li><span class="dashicons dashicons-yes-alt"></span>  Used in Title  </li>',psplctitle.indexOf(searchlc)<20?C+='<li><span class="dashicons dashicons-yes-alt"></span>  Found in the beginning of Title  </li>':C+='<li><span class="dashicons dashicons-dismiss"></span>  Not found in the beginning of Title  </li>'):C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in Title  </li>'),f&&(psplcdesc=f.toLowerCase().trim(),-1!==psplcdesc.search(searchlc)?(psplcdesc,C+='<li><span class="dashicons dashicons-yes-alt"></span>  Used in Meta Description  </li>'):C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in Meta Description  </li>'),r&&(psplcwptitle=r.toLowerCase().trim(),-1!==psplcwptitle.search(searchlc)?C+='<li><span class="dashicons dashicons-yes-alt"></span>  Used in h1 tag (Wordpress Title)  </li>':C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in h1 tag (Wordpress Title)  </li>'),C+="</ul>",""==s)return C+="</div>",C+="</div>",C+="</div>",void(jQuery.inArray(parseInt(e),O)>-1&&(C+="</div>"));var i,l=[];i=pspGetOccurences(searchlc,s,!1),pspsearchlcarr=searchlc.split(/[\/\s]+/),pspsearchlccount=pspsearchlcarr.length,l=i[1],pspkd=0,pspkeycounter=0,a>0&&l&&(pspkd=l.length*pspsearchlccount/a*100);var o=i[0];o&&(pspkeycounter=o.length),C+="<ul>",l.length>0?(C=pspkd.toFixed(2)<3?C+'<li><span class="dashicons dashicons-yes-alt"></span>  Used in content '+l.length+" time(s) </li>":C+'<li><span class="dashicons dashicons-dismiss"></span> Used in content '+l.length+" time(s) </li>",pspkeycounter>0&&pspkeycounter<6?C=C+'<li><li><span class="dashicons dashicons-yes-alt"></span>  Found in first 100 words of content '+pspkeycounter+" time(s) </li>":0==pspkeycounter?C+='<li><span class="dashicons dashicons-dismiss"></span>  Not found in first 100 words of content  </li>':C=C+'<li><span class="dashicons dashicons-dismiss"></span>  Found in first 100 words of content '+pspkeycounter+" time(s) </li>",C=pspkd.toFixed(2)<3?C+'<li><span class="dashicons dashicons-yes-alt"></span> Keyword Density of '+t+" is "+pspkd.toFixed(2):C+'<li><span class="dashicons dashicons-dismiss"></span> Keyword Density of '+t+" is "+pspkd.toFixed(2)):C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in Content  </li>',k>0&&(C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  Used in other h1 tags '+k+" time(s) </li>"),A>0?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  Used in h2 tags '+A+" time(s) </li>":C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in h2 tags  </li>',E>0?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  Used in image alt attributes '+E+" time(s) </li>":C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in image alt attributes  </li>',I>0?C=C+'<li><span class="dashicons dashicons-yes-alt"></span>  Used in anchor texts '+I+" time(s) </li>":C+='<li><span class="dashicons dashicons-dismiss"></span>  Not used in anchor texts  </li>',C+="</ul>",C+="</div>",C+="</div>",C+="</div>",jQuery.inArray(parseInt(e),O)>-1&&(C+="</div>")}}),C+="</div>",C+="</div></div>",jQuery("#techblissonlineseoanalysis").html(C)}function getFirstWords(e){return e.split(/\s+/).slice(0,100).join(" ")}function pspGetOccurences(e,t,r){var s=e.length;if(0==s)return[];var i,a,n=getFirstWords(t),l=0,o=[],p=0,c=[];for(r||(t=t.toLowerCase(),e=e.toLowerCase());(i=t.indexOf(e,l))>-1;)o.push(i),l=i+s;for(;(a=n.indexOf(e,p))>-1;)c.push(a),p=a+s;return[c,o]}function pspGetCounOfIndices(e,t,r){if(0==e.length)return[];var s,i=[],a=[],n=[];r||(e=e.toLowerCase()),s=t.length;for(let n=0;n<s;n++)str=t[n],str&&(r||(str=str.toLowerCase()),str.indexOf(e,0)>-1&&(a.push(str),n<100&&i.push(str)));return n.push(i),n.push(a),n}function updateAll(){setUrlPreview(),setTitlePreview(),setDescriptionPreview()}String.prototype.trimEnd=function(e){e=e||" ";for(var t=this.length-1;t>=0&&this.charAt(t)==e;t--);return this.substring(0,t+1)},jQuery(document).ready(function(){jQuery("#URL").keyup(function(){setUrlPreview()}),jQuery(document).on("keyup","#new-post-slug",function(){setUrlPreview()}),jQuery(document).on("click",".cancel, .save",function(){setUrlPreview()}),jQuery('input[name="post_category[]"]').click(function(){setTitlePreview()}),jQuery("input[name^='tax_input[']").click(function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[title\\]").keyup(function(){setTitlePreview()}),jQuery("#title").keyup(function(){setTitlePreview()}),jQuery("#name").keyup(function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[titleformat\\]").bind("change",function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[titleformat\\]").on("change",function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[preferred_tax\\]").on("change",function(){pspPopulateTerms(),setTitlePreview()}),jQuery("#psp_seo_meta\\[preferred_term\\]").on("focus",function(){previousTerm=jQuery(this).val(),jQuery(this).attr("oldValue",previousTerm)}).on("change",function(){isTermSelected(),setTitlePreview()}),jQuery("#psp_seo_meta\\[disable_title_format\\]").on("change",function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[disable_title\\]").on("change",function(){setTitlePreview()}),jQuery("#psp_seo_meta\\[disable_psp\\]").on("change",function(){setTitlePreview(),setDescriptionPreview()}),jQuery("#psp_seo_meta\\[disable_description\\]").on("change",function(){setDescriptionPreview()}),jQuery("#psp_seo_meta\\[description\\]").keyup(function(){setDescriptionPreview()}),jQuery("#content").keyup(function(){setDescriptionPreview()}),jQuery("#psp_seo_meta\\[maxsnippet\\]").on("change",function(){setDescriptionPreview()}),jQuery("#DateText").keyup(function(){updateDateText()}),jQuery("#psp_seo_meta\\[keywords\\]").keyup(function(){setPSPSeoAnalysis()}),jQuery("#psp_analyse_btn").on("click",function(){setPSPSeoAnalysis()}),updateAll(),pspSubscribe()});